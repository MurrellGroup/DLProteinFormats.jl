var documenterSearchIndex = {"docs":
[{"location":"#DLProteinFormats","page":"Home","title":"DLProteinFormats","text":"Documentation for DLProteinFormats.\n\n","category":"section"},{"location":"#DLProteinFormats.broadcast_features-NTuple{4, Any}","page":"Home","title":"DLProteinFormats.broadcast_features","text":"broadcast_features(pdbids, chain_labels, batched_chainids, feature_func)\n\nBroadcasts feature vectors for a set of PDBs and chain labels over a batched set of chain ids. pdbids is a vector of PDB ids. chain_labels is a vector of chain labels. batched_chainids is a matrix of chain ids. feature_func is a function that will convert a PDB and chain to a feature vector.\n\nExample: dat = DLProteinFormats.load(PDBSimpleFlatV2500) #Construct a little batch: pdbids = [dat[10].name, dat[29].name] chainlabels = [dat[10].chainlabels, dat[29].chainlabels] chainids = zeros(Int, maximum([dat[29].len, dat[10].len]), 2) chainids[1:dat[10].len,1] .= dat[10].chainids chainids[1:dat[29].len,2] .= dat[29].chainids\n\nbf = broadcastfeatures(pdbids, chainlabels, chainids, ff)\n\n\n\n\n\n","category":"method"},{"location":"#DLProteinFormats.featurizer-Tuple{DataFrames.DataFrame, NamedTuple}","page":"Home","title":"DLProteinFormats.featurizer","text":"featurizer(table::DataFrame, features::NamedTuple; all_mask_prob = 0, feat_mask_prob = 0)\n\nReturns a function that will convert a PDB and chain to a feature vector. all_mask_prob is the probability of masking all features for a chain. feat_mask_prob is the probability of masking a feature for a chain, or a UnivariateDistribution that will be sampled for each chain, giving the probability of masking each feature for that chain. rand_cats_prob is the probability of randomly setting an extra category for a feature to positve. This allows conditioning on a range of values. rand_cats_weight is the number of chains that will have non-zero randcatsprob.\n\nIn the returned function, override is a dictionary of chain_id => dictionary of feature name => value.\n\nExample: chainfeatures = DLProteinFormats.load(PDBTable) ff = featurizer(chainfeatures, features, allmaskprob = 0.33, featmaskprob = Uniform(0,1)) ff(\"7A7B\", \"D\", override = Dict([\"D\" => Dict([\"gene_superkingdom\" => \"Eukaryota\"])]))\n\n\n\n\n\n","category":"method"},{"location":"#DLProteinFormats.flatten-Tuple{ProteinChains.ProteinStructure}","page":"Home","title":"DLProteinFormats.flatten","text":"flatten(rec::ProteinStructure; T = Float32)\n\nTakes a ProteinStructure and returns a tuple of the translations, rotations, residue indices, and features for each chain.\n\n\n\n\n\n","category":"method"},{"location":"#DLProteinFormats.sample_batched_inds-Tuple{Any, Any}","page":"Home","title":"DLProteinFormats.sample_batched_inds","text":"sample_batched_inds(flatrecs; l2b = length2batch(1000, 1.9))\n\nTakes a vector of (flattened) protein structures, and returns a vector of indices into the original array, with each batch containing a random sample of one protein from each cluster.\n\n\n\n\n\n","category":"method"},{"location":"#DLProteinFormats.unflatten-Union{Tuple{T}, Tuple{AbstractArray{T, 3}, AbstractArray{T, 3}, AbstractVector, Any, Any}} where T","page":"Home","title":"DLProteinFormats.unflatten","text":"unflatten(locs, rots, seqints, chainids, resnums)\nunflatten(locs, rots, seqhots, chainids, resnums)  \nunflatten(locs, rots, seq, chainids, resnums)\n\nConverts flattened protein structure data back into ProteinChain objects.\n\nArguments\n\nlocs: Array of translations/locations (3×1×L or 3×1×L×B for batched)\nrots: Array of rotations (3×3×L or 3×3×L×B for batched) \nseqints/seqhots/seq: Sequence data as integers, one-hot encoding, or generic sequence\nchainids: Chain identifiers for each residue\nresnums: Residue numbers for each position\n\nReturns\n\nVector of ProteinChain objects (or vector of vectors for batched input)\n\nThe function reconstructs protein chains from flattened representations, applying unit scaling to locations and converting sequence integers back to amino acid strings.\n\n\n\n\n\n","category":"method"},{"location":"#ProteinChains.writepdb","page":"Home","title":"ProteinChains.writepdb","text":"writepdb(path, chains::AbstractVector{<:ProteinChains.ProteinChain})\n\nExamples\n\nusing DLProteinFormats\n\ndata = DLProteinFormats.load(PDBSimpleFlat500);\n\nflat_chains = data[1];\n\nchains = DLProteinFormats.unflatten(\n    flat_chains.locs,\n    flat_chains.rots,\n    flat_chains.AAs,\n    flat_chains.chainids,\n    flat_chains.resinds) # unflatten the flat data\n\nwritepdb(\"chains-1.pdb\", chains) # view in e.g. chimerax or vscode protein viewer extension\n\n\n\n\n\n","category":"function"}]
}
